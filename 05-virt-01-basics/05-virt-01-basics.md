# Домашнее задание к занятию "5.1. Введение в виртуализацию. Типы и функции гипервизоров. Обзор рынка вендоров и областей применения."

## Задача 1

Опишите кратко, как вы поняли: в чем основное отличие полной (аппаратной) виртуализации, 
паравиртуализации и виртуализации на основе ОС.

- `Полная виртуализация` осуществляется специальным ПО, которое отвечает за распределение ресурсов для ВМ и изоляцию процессов одной ВМ от другой. 
ВМ полностью иммитирует наличие физического оборудования. Гостевая ОС не знает о применении виртуализации.

- `Виртуализация на основе ОС` это процесс, который хранит свое состояние в файле. Этот процесс работает в хостовой операционной системе 
и использует ресурсы системы как обычный процесс. Хостовая система распределяет ресурсы для гостевых ОС.

- `Паравиртуализация` в отличие от других видов виртуализации явно дает возможность отправлять гипервызовы через специальный интерфейс к гипервизору. 
При паравиртуализации гостевая ОС знает о применении технологии виртуализации из-за наличия этого интерфейса. Для паравиртуализации перписывают ядро ОС, 
чтобы гостевая ОС знала о наличии API ВМ, поэтому этот способ применим только для ОС с открытым исходным кодом ядра (где-то такое читал). 


## Задача 2

Выберите один из вариантов использования организации физических серверов, в зависимости от условий использования.

Организация серверов:
- физические сервера,
- паравиртуализация,
- виртуализация уровня ОС.

Условия использования:
- Высоконагруженная база данных, чувствительная к отказу.
- Различные web-приложения.
- Windows системы для использования бухгалтерским отделом.
- Системы, выполняющие высокопроизводительные расчеты на GPU.

Опишите, почему вы выбрали к каждому целевому использованию такую организацию.

```Ответ:```
- Высоконагруженная база данных, чувствительная к отказу.

Высоконагруженная база данных будет наиболее эффективно утилизировать ресурс физического сервера. БД не требует постоянного выделения ресурса и динамического создания виртуальных машин, как при подключении к пользователей к ПО для бухгалтерии.

- Различные web-приложения.
 
Для изоляции работы Web-приложений (если они не должны осуществлять прямой обмен информацией) можно применить паравиртуализацию или вируализацию уровня ОС. 

- Windows системы для использования бухгалтерским отделом.

Виртуализация уровня ОС наилуший подход, так как необходимо выделять несколько изолированных рабочих мест с рапределением прав и учетной политекой.

- Системы, выполняющие высокопроизводительные расчеты на GPU.

Физические сервера лучше пододут для такой системы, так как требуется предоставление максимум ресурсов для выполнения расчетов,
при применении виртуализации быстродействие может значительно снизить скорость выполнения расчета.


## Задача 3

Выберите подходящую систему управления виртуализацией для предложенного сценария. 
Детально опишите ваш выбор.

Сценарии:

1. 100 виртуальных машин на базе Linux и Windows, общие задачи, нет особых требований. 
Преимущественно Windows based инфраструктура, требуется реализация программных балансировщиков 
нагрузки, репликации данных и автоматизированного механизма создания резервных копий.

`Hyper-V, так как Win based инфраструктура, есть поддержка реплик и миграции накопителей данных`


2. Требуется наиболее производительное бесплатное open source решение для виртуализации 
небольшой (20-30 серверов) инфраструктуры на базе Linux и Windows виртуальных машин.

`KVM - поддерживает Windows в качестве гостевой ОС, производительность близкая к нативной.`

3. Необходимо бесплатное, максимально совместимое и производительное решение для виртуализации 
Windows инфраструктуры.

`KVM - поддерживает Windows в качестве гостевой ОС, производительность близкая к нативной.`

4. Необходимо рабочее окружение для тестирования программного продукта на нескольких 
дистрибутивах Linux.

`KVM, так как необходима среда для временного тестирования ПО, поэтому простота очень важна, 
но если при тестировании важна стабильность, то Xen.`


## Задача 4

Опишите возможные проблемы и недостатки гетерогенной среды виртуализации 
(использования нескольких систем управления виртуализацией одновременно) 
и что необходимо сделать для минимизации этих рисков и проблем. 
Если бы у вас был выбор, то создавали бы вы гетерогенную среду или нет? 
Мотивируйте ваш ответ примерами.

```Ответ:```
Основная проблама это сложность частого перемещения данных между виртуальной ОС и физической средой.
Требуются спецалисты различного профиля для управления системами различных производителей - это дорогое удовольствие.
Разнородность дирректорий хранения данных и произвольное расположение виртуальных машин в инфраструктуре значительно усложняет управление большими объемами динамических данных.

Если можно достигнуть осуществить декомпозицию монолита на микросервисы, то можно сгруппировать (разбить на кластеры по функционалу и степени динамичности) сервисы которые активно обмениваются данными в одной инфраструктуре, а те сервисы, которые осуществляют минимальный обмен данными с другими микросервисами, но активно, или не очень активно, взаимодействиует с внешним миром, можно выполнить на других принципах или использовать других производителей. 
Такая кластеризация микросервисов позволит не привязываться к единому производителю и в то же время невилирует проблемы гетерогенной (гибридной) среды.
Я не работал с такими системами, поэтому мне сложно судить, но думаю при наличии грамотной команды я бы применил гетерогенную среду, так как любые проблемы можно решить, главное правильно их определить и вывести.
Мотивация моего ответа описана выше в примере декомпозиции и кластеризации микросервисной системы.
