# Домашняя работа к занятию "6.1. Типы и структура СУБД"

## Задача 1

Архитектор ПО решил проконсультироваться у вас, какой тип БД 
лучше выбрать для хранения определенных данных.

Он вам предоставил следующие типы сущностей, которые нужно будет хранить в БД:

- Электронные чеки в json виде

`документоориентированная БД` - чек это документ со своим номером, и другими параметрами (полями).

`хранилище key-value` - можно также хранить в таком виде, т.е. ключ это номер чека, а последовательность значений в предопределнном порядке это значения полей чека.

- Склады и автомобильные дороги для логистической компании
 
`Графовая БД` - для логистики необходимо хранить местонахождение складов (вершины графов) и дороги (ребра графа). 
Neo4j, OrientDB и др.

- Генеалогические деревья

`Сетевая` - думал иерархическую написать, но вспомнил, что в любом случае у сущности будет два родителя и может быть много детей
А если учесть разводы и очередные браки, а также если учесть приемных и биологических родителей, то однозначно сетевая.
IDS (GE), DBMS-10 (DEC)

- Кэш идентификаторов клиентов с ограниченным временем жизни для движка аутентификации

`Хранилище key-value` - где идентификатор - это значение, а клиент - это ключ. Как-то так. Не работал с подобными сущностями, поэтому сложно сказать точнее. Не понятны бизнес ограничения.

- Отношения клиент-покупка для интернет-магазина

`реляционная` - из текста сразу понятно что "отношения" описываются теорией множеств в реляционной БД.
Работал с MS SQL, PostgreSQL.

Выберите подходящие типы СУБД для каждой сущности и объясните свой выбор.

## Задача 2

Вы создали распределенное высоконагруженное приложение и хотите классифицировать его согласно 
CAP-теореме. Какой классификации по CAP-теореме соответствует ваша система, если 
(каждый пункт - это отдельная реализация вашей системы и для каждого пункта надо привести классификацию):

- Данные записываются на все узлы с задержкой до часа (асинхронная запись)

`PA` - CAP

`EL` - PACELC

- При сетевых сбоях, система может разделиться на 2 раздельных кластера

`PA` - CAP

`PA` - PACELC

- Система может не прислать корректный ответ или сбросить соединение

`PC` - CAP

`PC ` - PACELC

А согласно PACELC-теореме, как бы вы классифицировали данные реализации?

## Задача 3

Могут ли в одной системе сочетаться принципы BASE и ACID? Почему?

Нет, так как BASE противопоставляет себя ACID. Т.е. принцип BA - противоречит принципу D и A (судя из информации на слайдах лекции).
BASE не позволяет проектировать высокопроизводительные системы в отличии от ACID. 
## Задача 4

Вам дали задачу написать системное решение, основой которого бы послужили:

- фиксация некоторых значений с временем жизни
- реакция на истечение таймаута

Вы слышали о key-value хранилище, которое имеет механизм [Pub/Sub](https://habr.com/ru/post/278237/). 
Что это за система? Какие минусы выбора данной системы?

`Redis` вообще-то не pub-sub система, а key-value data storage. Но он на удивление хорошо реализует 
классический pub-sub и показывает замечательную производительность.

Redis — это хранилище данных в оперативной памяти. Имеет открытый исходный код, а используется как база данных, кэш и брокер сообщений.
Хранилище организовано по модели «ключ – значение».

Минусы (ограничения):
- Если издатель по каким-либо причинам выходит из строя, то он теряет всех своих подписчиков
- Издателю необходимо знать точный адрес всех его подписчиков
- Издатель может перегрузить работой своих подписчиков, если данные публикуются быстрее, чем обрабатываются
- Сообщение удаляется из буфера издателя сразу после публикации, не зависимо от того, какому числу подписчиков оно доставлено и как быстро те сумели обработать это сообщение.
- Все подписчики получат сообщение одновременно. Подписчики сами должны как-то между собой согласовывать порядок обработки одного и того же сообщения.
- Нет встроенного механизма подтверждения успешной обработки сообщения подписчиком. Если подписчик получил сообщение и свалился во время обработки, то издатель об этом не узнает.
